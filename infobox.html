<!DOCTYPE html>
<html>
<head>
	<title>InfoBox</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
<style type="text/css">
	#infobox {
		height: 200px;
		padding: 30px;
		text-align: center;
	}
	ul{
		padding-left: 0;
		list-style: none;
	}

	li{
		text-align: left;
	}
</style>

</head>
<body>
<div id="infobox" class="jumbotron">
<div class="row">
  <div class="col-sm-4">
	<h5>Company</h5>
	<ul>
	  <li id="company-name">Name: </li>
	  <li id="ticker">Ticker: </li>
	  <li id="sector">Sector: </li>
	  <li id="industry">Industry: </li>
    <ul>
  </div>
  <div class="col-sm-5">
    <h5>Event</h5>
    <ul id="event">
    <div id="insert"></div>
    <li id="impact-score-overall">Impact Score(overall): </li>
    <div id="impact"></div>
    </ul>
  </div>
  <div class="col-sm-3">
	<h5>Article</h5>
	<ul>
	  <li id="article-type">Article-Type: </li>
	  <li id="url">Link: </li>
	  <li id="author-rank">Author-Rank: </li>
	  <li id="source-rank">Source-Rank: </li>
	  <li id="first-mention">First-Mention: </li>
	</ul>
  </div>
</div>
	
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script type="text/javascript">


	function displayInfo(article){
		var prefix = "";
		for(var i =0; i < article["entities"].length; i++){
			$("#company-name").append(prefix).append(article["entities"][i]["name"])
			$("#ticker").append(prefix).append(article["entities"][i]["ticker"])
			$("#sector").append(article["entities"][i]["sector"])
			$("#industry").append(article["entities"][i]["industry"])
			prefix = "/"
		}
		prefix = ""
		
		for(var i=0; i< article["event_groups"].length; i++){
			$("#insert").append("<li>Type/Group" + (i+1) +": " + article["event_groups"][i]["type"] +"/"+ article["event_groups"][i]["group"] + "</li>")
			
		}

		$("#impact-score-overall").append(article["event_impact_score"]["overall"].toFixed(2));
		var on_entities = article["event_impact_score"]["on_entities"];

		for(var i=0;i<on_entities.length; i++){
			$("#impact").append("<li>Impact Score(on " + on_entities[i]["entity"]+"): "+on_entities[i]["on_entity"] + "</li>")
		}
		

		$("#article-type").append(article["article_type"]).css('textTransform','capitalize');
		$("#url").append("<a href='" + article["article_url"] +"'>Visit article</a>")
		$("#author-rank").append(article["overall_author_rank"])
		$("#source-rank").append(article["overall_source_rank"])
		$("#first-mention").append(article["first_mention"].toString()).css('textTransform','capitalize');
		
	};

	var url = "https://raw.githubusercontent.com/Geminiii/d3labs/master/accern_response.json"

	d3.json(url, function(err, response){
		displayInfo(response[0])
		
	})
</script>
</body>
</html>